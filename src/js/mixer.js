!function(t){function e(e,r,s,n,o){function l(){h.unbind("webkitTransitionEnd transitionend otransitionend oTransitionEnd"),r&&i(r,s,n,o),o.startOrder=[],o.newOrder=[],o.origSort=[],o.checkSort=[],u.removeStyle(o.prefix+"filter, filter, "+o.prefix+"transform, transform, opacity, display").css(o.clean).removeAttr("data-checksum"),window.atob||u.css({display:"none",opacity:"0"}),h.removeStyle(o.prefix+"transition, transition, "+o.prefix+"perspective, perspective, "+o.prefix+"perspective-origin, perspective-origin, "+(o.resizeContainer?"height":"")),"list"==o.layoutMode?(g.css({display:o.targetDisplayList,opacity:"1"}),o.origDisplay=o.targetDisplayList):(g.css({display:o.targetDisplayGrid,opacity:"1"}),o.origDisplay=o.targetDisplayGrid),o.origLayout=o.layoutMode,setTimeout(function(){if(u.removeStyle(o.prefix+"transition, transition"),o.mixing=!1,"function"==typeof o.onMixEnd){var t=o.onMixEnd.call(this,o);o=t||o}})}if(clearInterval(o.failsafe),o.mixing=!0,o.filter=e,"function"==typeof o.onMixStart){var c=o.onMixStart.call(this,o);o=c||o}var d=o.transitionSpeed;for(c=0;2>c;c++){var f=0==c?f=o.prefix:"";o.transition[f+"transition"]="all "+d+"ms linear",o.transition[f+"transform"]=f+"translate3d(0,0,0)",o.perspective[f+"perspective"]=o.perspectiveDistance+"px",o.perspective[f+"perspective-origin"]=o.perspectiveOrigin}var p=o.targetSelector,u=n.find(p);u.each(function(){this.data={}});var h=u.parent();h.css(o.perspective),o.easingFallback="ease-in-out","smooth"==o.easing&&(o.easing="cubic-bezier(0.25, 0.46, 0.45, 0.94)"),"snap"==o.easing&&(o.easing="cubic-bezier(0.77, 0, 0.175, 1)"),"windback"==o.easing&&(o.easing="cubic-bezier(0.175, 0.885, 0.320, 1.275)",o.easingFallback="cubic-bezier(0.175, 0.885, 0.320, 1)"),"windup"==o.easing&&(o.easing="cubic-bezier(0.6, -0.28, 0.735, 0.045)",o.easingFallback="cubic-bezier(0.6, 0.28, 0.735, 0.045)"),c="list"==o.layoutMode&&null!=o.listEffects?o.listEffects:o.effects,Array.prototype.indexOf&&(o.fade=-1<c.indexOf("fade")?"0":"",o.scale=-1<c.indexOf("scale")?"scale(.01)":"",o.rotateZ=-1<c.indexOf("rotateZ")?"rotate(180deg)":"",o.rotateY=-1<c.indexOf("rotateY")?"rotateY(90deg)":"",o.rotateX=-1<c.indexOf("rotateX")?"rotateX(90deg)":"",o.blur=-1<c.indexOf("blur")?"blur(8px)":"",o.grayscale=-1<c.indexOf("grayscale")?"grayscale(100%)":"");var g=t(),v=t(),y=[],m=!1;"string"==typeof e?y=a(e):(m=!0,t.each(e,function(t){y[t]=a(this)})),"or"==o.filterLogic?(""==y[0]&&y.shift(),1>y.length?v=v.add(n.find(p+":visible")):u.each(function(){var e=t(this);if(m){var i=0;t.each(y,function(t){this.length?e.is("."+this.join(", ."))&&i++:0<i&&i++}),i==y.length?g=g.add(e):v=v.add(e)}else e.is("."+y.join(", ."))?g=g.add(e):v=v.add(e)})):(g=g.add(h.find(p+"."+y.join("."))),v=v.add(h.find(p+":not(."+y.join(".")+"):visible"))),e=g.length;var x=t(),C=t(),O=t();if(v.each(function(){var e=t(this);"none"!=e.css("display")&&(x=x.add(e),O=O.add(e))}),g.filter(":visible").length==e&&!x.length&&!r){if(o.origLayout==o.layoutMode)return l(),!1;if(1==g.length)return"list"==o.layoutMode?(n.addClass(o.listClass),n.removeClass(o.gridClass),O.css("display",o.targetDisplayList)):(n.addClass(o.gridClass),n.removeClass(o.listClass),O.css("display",o.targetDisplayGrid)),l(),!1}if(o.origHeight=h.height(),g.length){if(n.removeClass(o.failClass),g.each(function(){var e=t(this);"none"==e.css("display")?C=C.add(e):O=O.add(e)}),o.origLayout!=o.layoutMode&&0==o.animateGridList)return"list"==o.layoutMode?(n.addClass(o.listClass),n.removeClass(o.gridClass),O.css("display",o.targetDisplayList)):(n.addClass(o.gridClass),n.removeClass(o.listClass),O.css("display",o.targetDisplayGrid)),l(),!1;if(!window.atob)return l(),!1;if(u.css(o.clean),O.each(function(){this.data.origPos=t(this).offset()}),"list"==o.layoutMode?(n.addClass(o.listClass),n.removeClass(o.gridClass),C.css("display",o.targetDisplayList)):(n.addClass(o.gridClass),n.removeClass(o.listClass),C.css("display",o.targetDisplayGrid)),C.each(function(){this.data.showInterPos=t(this).offset()}),x.each(function(){this.data.hideInterPos=t(this).offset()}),O.each(function(){this.data.preInterPos=t(this).offset()}),"list"==o.layoutMode?O.css("display",o.targetDisplayList):O.css("display",o.targetDisplayGrid),r&&i(r,s,n,o),r&&function(t,e){if(t.length!=e.length)return!1;for(var i=0;i<e.length;i++)if(t[i].compare&&!t[i].compare(e[i])||t[i]!==e[i])return!1;return!0}(o.origSort,o.checkSort))return l(),!1;for(x.hide(),C.each(function(e){this.data.finalPos=t(this).offset()}),O.each(function(){this.data.finalPrePos=t(this).offset()}),o.newHeight=h.height(),r&&i("reset",null,n,o),C.hide(),O.css("display",o.origDisplay),"block"==o.origDisplay?(n.addClass(o.listClass),C.css("display",o.targetDisplayList)):(n.removeClass(o.listClass),C.css("display",o.targetDisplayGrid)),o.resizeContainer&&h.css("height",o.origHeight+"px"),e={},c=0;2>c;c++)e[(f=0==c?f=o.prefix:"")+"transform"]=o.scale+" "+o.rotateX+" "+o.rotateY+" "+o.rotateZ,e[f+"filter"]=o.blur+" "+o.grayscale;C.css(e),O.each(function(){var e=this.data,i=t(this);i.hasClass("mix_tohide")?(e.preTX=e.origPos.left-e.hideInterPos.left,e.preTY=e.origPos.top-e.hideInterPos.top):(e.preTX=e.origPos.left-e.preInterPos.left,e.preTY=e.origPos.top-e.preInterPos.top);for(var a={},r=0;2>r;r++){var s=0==r?s=o.prefix:"";a[s+"transform"]="translate("+e.preTX+"px,"+e.preTY+"px)"}i.css(a)}),"list"==o.layoutMode?(n.addClass(o.listClass),n.removeClass(o.gridClass)):(n.addClass(o.gridClass),n.removeClass(o.listClass)),setTimeout(function(){if(o.resizeContainer){for(var e={},i=0;2>i;i++){var a=0==i?a=o.prefix:"";e[a+"transition"]="all "+d+"ms ease-in-out",e.height=o.newHeight+"px"}h.css(e)}for(x.css("opacity",o.fade),C.css("opacity",1),C.each(function(){var e=this.data;e.tX=e.finalPos.left-e.showInterPos.left,e.tY=e.finalPos.top-e.showInterPos.top;for(var i={},a=0;2>a;a++){var r=0==a?r=o.prefix:"";i[r+"transition-property"]=r+"transform, "+r+"filter, opacity",i[r+"transition-timing-function"]=o.easing+", linear, linear",i[r+"transition-duration"]=d+"ms",i[r+"transition-delay"]="0",i[r+"transform"]="translate("+e.tX+"px,"+e.tY+"px)",i[r+"filter"]="none"}t(this).css("-webkit-transition","all "+d+"ms "+o.easingFallback).css(i)}),O.each(function(){var e=this.data;e.tX=0!=e.finalPrePos.left?e.finalPrePos.left-e.preInterPos.left:0,e.tY=0!=e.finalPrePos.left?e.finalPrePos.top-e.preInterPos.top:0;for(var i={},a=0;2>a;a++){var r=0==a?r=o.prefix:"";i[r+"transition"]="all "+d+"ms "+o.easing,i[r+"transform"]="translate("+e.tX+"px,"+e.tY+"px)"}t(this).css("-webkit-transition","all "+d+"ms "+o.easingFallback).css(i)}),e={},i=0;2>i;i++)e[(a=0==i?a=o.prefix:"")+"transition"]="all "+d+"ms "+o.easing+", "+a+"filter "+d+"ms linear, opacity "+d+"ms linear",e[a+"transform"]=o.scale+" "+o.rotateX+" "+o.rotateY+" "+o.rotateZ,e[a+"filter"]=o.blur+" "+o.grayscale,e.opacity=o.fade;x.css(e),h.bind("webkitTransitionEnd transitionend otransitionend oTransitionEnd",function(e){(-1<e.originalEvent.propertyName.indexOf("transform")||-1<e.originalEvent.propertyName.indexOf("opacity"))&&(-1<p.indexOf(".")?t(e.target).hasClass(p.replace(".",""))&&l():t(e.target).is(p)&&l())})},10),o.failsafe=setTimeout(function(){o.mixing&&l()},d+400)}else{if(o.resizeContainer&&h.css("height",o.origHeight+"px"),!window.atob)return l(),!1;x=v,setTimeout(function(){if(h.css(o.perspective),o.resizeContainer){for(var t={},e=0;2>e;e++){var i=0==e?i=o.prefix:"";t[i+"transition"]="height "+d+"ms ease-in-out",t.height=o.minHeight+"px"}h.css(t)}if(u.css(o.transition),v.length){for(t={},e=0;2>e;e++)t[(i=0==e?i=o.prefix:"")+"transform"]=o.scale+" "+o.rotateX+" "+o.rotateY+" "+o.rotateZ,t[i+"filter"]=o.blur+" "+o.grayscale,t.opacity=o.fade;x.css(t),h.bind("webkitTransitionEnd transitionend otransitionend oTransitionEnd",function(t){(-1<t.originalEvent.propertyName.indexOf("transform")||-1<t.originalEvent.propertyName.indexOf("opacity"))&&(n.addClass(o.failClass),l())})}else o.mixing=!1},10)}}function i(e,i,a,r){function s(t){"asc"==i?n.prepend(t).prepend(" "):n.append(t).append(" ")}a.find(r.targetSelector).wrapAll('<div class="mix_sorter"/>');var n=a.find(".mix_sorter");if(r.origSort.length||n.find(r.targetSelector+":visible").each(function(){t(this).wrap("<s/>"),r.origSort.push(t(this).parent().html().replace(/\s+/g,"")),t(this).unwrap()}),n.empty(),"reset"==e)t.each(r.startOrder,function(){n.append(this).append(" ")});else if("default"==e)t.each(r.origOrder,function(){s(this)});else if("random"==e)r.newOrder.length||(r.newOrder=function(t){for(var e=(t=t.slice()).length,i=e;i--;){var a=parseInt(Math.random()*e),r=t[i];t[i]=t[a],t[a]=r}return t}(r.startOrder)),t.each(r.newOrder,function(){n.append(this).append(" ")});else if("custom"==e)t.each(i,function(){s(this)});else{if(void 0===r.origOrder[0].attr(e))return console.log("No such attribute found. Terminating"),!1;r.newOrder.length||(t.each(r.origOrder,function(){r.newOrder.push(t(this))}),r.newOrder.sort(function(t,i){var a=isNaN(1*t.attr(e))?t.attr(e).toLowerCase():1*t.attr(e),r=isNaN(1*i.attr(e))?i.attr(e).toLowerCase():1*i.attr(e);return a<r?-1:a>r?1:0})),t.each(r.newOrder,function(){s(this)})}r.checkSort=[],n.find(r.targetSelector+":visible").each(function(e){var i=t(this);0==e&&i.attr("data-checksum","1"),i.wrap("<s/>"),r.checkSort.push(i.parent().html().replace(/\s+/g,"")),i.unwrap()}),a.find(r.targetSelector).unwrap()}function a(e){var i=(e=e.replace(/\s{2,}/g," ")).split(" ");return t.each(i,function(t){"all"==this&&(i[t]="mix_all")}),""==i[0]&&i.shift(),i}var r={init:function(a){return this.each(function(){var r;((r=!!(r=window.navigator.appVersion.match(/Chrome\/(\d+)\./))&&parseInt(r[1],10))&&31==r||32==r)&&function(t){var e=(t=document.getElementById(t)).parentElement,i=document.createElement("div"),a=document.createDocumentFragment();e.insertBefore(i,t),a.appendChild(t),e.replaceChild(t,i)}(this.id);var s={targetSelector:".mix",filterSelector:".filter",sortSelector:".sort",buttonEvent:"click",effects:["fade","scale"],listEffects:null,easing:"smooth",layoutMode:"grid",targetDisplayGrid:"inline-block",targetDisplayList:"block",listClass:"",gridClass:"",transitionSpeed:600,showOnLoad:"all",sortOnLoad:!1,multiFilter:!1,filterLogic:"or",resizeContainer:!0,minHeight:0,failClass:"fail",perspectiveDistance:"3000",perspectiveOrigin:"50% 50%",animateGridList:!0,onRmsLoad:null,onMixStart:null,onMixEnd:null,container:null,origOrder:[],startOrder:[],newOrder:[],origSort:[],checkSort:[],filter:"",mixing:!1,origDisplay:"",origLayout:"",origHeight:0,newHeight:0,isTouch:!1,resetDelay:0,failsafe:null,prefix:"",easingFallback:"ease-in-out",transition:{},perspective:{},clean:{},fade:"1",scale:"",rotateX:"",rotateY:"",rotateZ:"",blur:"",grayscale:""};a&&t.extend(s,a),this.config=s,t.support.touch="ontouchend"in document,t.support.touch&&(s.isTouch=!0,s.resetDelay=350),s.container=t(this);var n,o=s.container;(s.prefix=function(t){for(var e=["Webkit","Moz","O","ms"],i=0;i<e.length;i++)if(e[i]+"Transition"in t.style)return e[i];return"transition"in t.style&&""}(o[0]),s.prefix=s.prefix?"-"+s.prefix.toLowerCase()+"-":"",o.find(s.targetSelector).each(function(){s.origOrder.push(t(this))}),s.sortOnLoad)&&(t.isArray(s.sortOnLoad)?(r=s.sortOnLoad[0],n=s.sortOnLoad[1],t(s.sortSelector+"[data-sort="+s.sortOnLoad[0]+"][data-order="+s.sortOnLoad[1]+"]").addClass("active")):(t(s.sortSelector+"[data-sort="+s.sortOnLoad+"]").addClass("active"),r=s.sortOnLoad,s.sortOnLoad="desc"),i(r,n,o,s));for(n=0;2>n;n++)r=0==n?r=s.prefix:"",s.transition[r+"transition"]="all "+s.transitionSpeed+"ms ease-in-out",s.perspective[r+"perspective"]=s.perspectiveDistance+"px",s.perspective[r+"perspective-origin"]=s.perspectiveOrigin;for(n=0;2>n;n++)r=0==n?r=s.prefix:"",s.clean[r+"transition"]="none";"list"==s.layoutMode?(o.addClass(s.listClass),s.origDisplay=s.targetDisplayList):(o.addClass(s.gridClass),s.origDisplay=s.targetDisplayGrid),s.origLayout=s.layoutMode,n=s.showOnLoad.split(" "),t.each(n,function(){t(s.filterSelector+'[data-filter="'+this+'"]').addClass("active")}),o.find(s.targetSelector).addClass("mix_all"),"all"==n[0]&&(n[0]="mix_all",s.showOnLoad="mix_all");var l=t();t.each(n,function(){l=l.add(t("."+this))}),l.each(function(){var e=t(this);"list"==s.layoutMode?e.css("display",s.targetDisplayList):e.css("display",s.targetDisplayGrid),e.css(s.transition)}),setTimeout(function(){s.mixing=!0,l.css("opacity","1"),setTimeout(function(){if("list"==s.layoutMode?l.removeStyle(s.prefix+"transition, transition").css({display:s.targetDisplayList,opacity:1}):l.removeStyle(s.prefix+"transition, transition").css({display:s.targetDisplayGrid,opacity:1}),s.mixing=!1,"function"==typeof s.onRmsLoad){var t=s.onRmsLoad.call(this,s);s=t||s}},s.transitionSpeed)},10),s.filter=s.showOnLoad,t(s.sortSelector).bind(s.buttonEvent,function(){if(!s.mixing){var i=t(this),a=i.attr("data-sort"),r=i.attr("data-order");if(i.hasClass("active")){if("random"!=a)return!1}else t(s.sortSelector).removeClass("active"),i.addClass("active");o.find(s.targetSelector).each(function(){s.startOrder.push(t(this))}),e(s.filter,a,r,o,s)}}),t(s.filterSelector).bind(s.buttonEvent,function(){if(!s.mixing){var i=t(this);if(0==s.multiFilter)t(s.filterSelector).removeClass("active"),i.addClass("active"),s.filter=i.attr("data-filter"),t(s.filterSelector+'[data-filter="'+s.filter+'"]').addClass("active");else{var a=i.attr("data-filter");i.hasClass("active")?(i.removeClass("active"),s.filter=s.filter.replace(RegExp("(\\s|^)"+a),"")):(i.addClass("active"),s.filter=s.filter+" "+a)}e(s.filter,null,null,o,s)}})})},toGrid:function(){return this.each(function(){var i=this.config;"grid"!=i.layoutMode&&(i.layoutMode="grid",e(i.filter,null,null,t(this),i))})},toList:function(){return this.each(function(){var i=this.config;"list"!=i.layoutMode&&(i.layoutMode="list",e(i.filter,null,null,t(this),i))})},filter:function(i){return this.each(function(){var a=this.config;a.mixing||(t(a.filterSelector).removeClass("active"),t(a.filterSelector+'[data-filter="'+i+'"]').addClass("active"),e(i,null,null,t(this),a))})},sort:function(i){return this.each(function(){var a=this.config,r=t(this);if(!a.mixing){if(t(a.sortSelector).removeClass("active"),t.isArray(i)){var s=i[0],n=i[1];t(a.sortSelector+'[data-sort="'+i[0]+'"][data-order="'+i[1]+'"]').addClass("active")}else t(a.sortSelector+'[data-sort="'+i+'"]').addClass("active"),s=i,n="desc";r.find(a.targetSelector).each(function(){a.startOrder.push(t(this))}),e(a.filter,s,n,r,a)}})},multimix:function(i){return this.each(function(){var a=this.config,r=t(this);multiOut={filter:a.filter,sort:null,order:"desc",layoutMode:a.layoutMode},t.extend(multiOut,i),a.mixing||(t(a.filterSelector).add(a.sortSelector).removeClass("active"),t(a.filterSelector+'[data-filter="'+multiOut.filter+'"]').addClass("active"),void 0!==multiOut.sort&&(t(a.sortSelector+'[data-sort="'+multiOut.sort+'"][data-order="'+multiOut.order+'"]').addClass("active"),r.find(a.targetSelector).each(function(){a.startOrder.push(t(this))})),a.layoutMode=multiOut.layoutMode,e(multiOut.filter,multiOut.sort,multiOut.order,r,a))})},remix:function(i){return this.each(function(){var a=this.config,r=t(this);a.origOrder=[],r.find(a.targetSelector).each(function(){var e=t(this);e.addClass("mix_all"),a.origOrder.push(e)}),a.mixing||void 0===i||(t(a.filterSelector).removeClass("active"),t(a.filterSelector+'[data-filter="'+i+'"]').addClass("active"),e(i,null,null,r,a))})}};t.fn.mixIt=function(t,e){return r[t]?r[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void 0:r.init.apply(this,arguments)},t.fn.removeStyle=function(e){return this.each(function(){var i=t(this),a=(e=e.replace(/\s+/g,"")).split(",");t.each(a,function(){var t=RegExp(this.toString()+"[^;]+;?","g");i.attr("style",function(e,i){if(i)return i.replace(t,"")})})})}}(jQuery);